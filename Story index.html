<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§ê‡§™ | Story App</title>
    <style>
        /* --- ‡§ó‡•Ç‡§ó‡§≤ ‡§´‡§º‡•â‡§®‡•ç‡§ü‡•ç‡§∏ --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Tiro+Devanagari+Hindi:wght@400&display=swap');

        /* --- ‡§¨‡•á‡§∏‡§ø‡§ï ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤‡•ç‡§∏ --- */
        :root {
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --background-color: #f4f7f6;
            --text-color: #333;
            --card-bg: #ffffff;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'Tiro Devanagari Hindi', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* --- ‡§π‡•á‡§°‡§∞ ‡§î‡§∞ ‡§®‡•á‡§µ‡§ø‡§ó‡•á‡§∂‡§® --- */
        header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        header h1 {
            font-size: 1.5rem;
            cursor: pointer;
        }

        .nav-icons {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-icons .icon {
            font-size: 1.4rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .nav-icons .icon:hover {
            transform: scale(1.1);
        }

        /* --- ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§Æ‡•à‡§®‡•á‡§ú‡§Æ‡•á‡§Ç‡§ü --- */
        .screen {
            display: none;
            animation: fadeIn 0.5s;
        }
        .screen.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* --- ‡§≤‡•â‡§ó‡§ø‡§® ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® --- */
        #login-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .login-box {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        .login-box h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .btn {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            width: 100%;
            transition: opacity 0.3s;
        }
        .btn:hover {
            opacity: 0.9;
        }
        
        .back-btn {
            margin-top: 15px;
            background: #ccc;
            color: #333;
        }

        /* --- ‡§∏‡§∞‡•ç‡§ö ‡§¨‡§æ‡§∞ --- */
        .search-container {
            margin-bottom: 30px;
            position: relative;
        }

        #search-bar {
            width: 100%;
            padding: 15px 20px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 50px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        /* --- ‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä ‡§î‡§∞ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§°‡•ç‡§∏ --- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary-color);
            display: inline-block;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .card-content {
            padding: 20px;
        }

        .card h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .card p {
            font-size: 0.9rem;
            color: #666;
        }

        /* --- ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§°‡§ø‡§ü‡•á‡§≤ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® --- */
        #story-detail-screen .story-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        #story-title {
            font-size: 2.5rem;
            color: var(--primary-color);
        }
        
        #story-author {
            font-size: 1.2rem;
            color: #555;
            font-style: italic;
        }
        
        #story-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #e9e9e9;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        #favorite-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.8rem;
            color: #ccc;
        }
        #favorite-btn.favorited {
            color: #ff4757;
        }
        
        #audio-player {
            width: calc(100% - 50px);
        }
        
        #story-content {
            font-family: 'Tiro Devanagari Hindi', serif;
            font-size: 1.2rem;
            text-align: justify;
            white-space: pre-wrap; /* ‡§™‡•ç‡§∞‡§ø‡§ú‡§∞‡•ç‡§µ ‡§∏‡•ç‡§™‡•á‡§∏‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§≤‡§æ‡§á‡§® ‡§¨‡•ç‡§∞‡•á‡§ï */
        }
    </style>
</head>
<body>

    <!-- ‡§≤‡•â‡§ó‡§ø‡§® ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
    <div id="login-screen" class="screen active">
        <div class="login-box">
            <h2>‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§ê‡§™ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à</h2>
            <p style="margin-bottom: 20px; color: #666;">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§ï‡•á ‡§Ö‡§™‡§®‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç‡•§</p>
            <form id="login-form">
                <div class="input-group">
                    <input type="text" id="username" placeholder="‡§Ø‡•Ç‡§ú‡§º‡§∞‡§®‡•á‡§Æ (‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§°‡§æ‡§≤‡•á‡§Ç)" required>
                </div>
                <div class="input-group">
                    <input type="password" id="password" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° (‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§°‡§æ‡§≤‡•á‡§Ç)" required>
                </div>
                <button type="submit" class="btn">‡§≤‡•â‡§ó‡§ø‡§® / ‡§∏‡§æ‡§á‡§®-‡§Ö‡§™</button>
            </form>
        </div>
    </div>

    <!-- ‡§Æ‡•á‡§® ‡§ê‡§™ ‡§ï‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ (‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§¶‡§ø‡§ñ‡§§‡§æ ‡§π‡•à) -->
    <div id="main-app" style="display: none;">
        <header>
            <h1 id="app-title">‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä‡§ú‡§º</h1>
            <div class="nav-icons">
                <span id="favorites-icon" class="icon" title="‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ">‚ù§Ô∏è</span>
                <span id="user-icon" class="icon" title="‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤">üë§</span>
            </div>
        </header>

        <main class="container">
            <!-- ‡§π‡•ã‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®: ‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä -->
            <div id="home-screen" class="screen">
                <div class="search-container">
                    <input type="text" id="search-bar" placeholder="‡§ï‡§π‡§æ‡§®‡•Ä ‡§Ø‡§æ ‡§≤‡•á‡§ñ‡§ï ‡§ñ‡•ã‡§ú‡•á‡§Ç...">
                </div>
                <h2 class="section-title">‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä‡§ú‡§º</h2>
                <div id="category-grid" class="grid-container">
                    <!-- ‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä ‡§Ø‡§π‡§æ‡§Å JavaScript ‡§∏‡•á ‡§Ü‡§è‡§Ç‡§ó‡•Ä -->
                </div>
            </div>

            <!-- ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="story-list-screen" class="screen">
                <button class="btn back-btn" data-target="home-screen">‚Üê ‡§µ‡§æ‡§™‡§∏ ‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä ‡§™‡§∞</button>
                <h2 id="list-title" class="section-title"></h2>
                <div id="story-list-grid" class="grid-container">
                    <!-- ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§Ø‡§π‡§æ‡§Å JavaScript ‡§∏‡•á ‡§Ü‡§è‡§ó‡•Ä -->
                </div>
            </div>

            <!-- ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§°‡§ø‡§ü‡•á‡§≤ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="story-detail-screen" class="screen">
                <button class="btn back-btn" data-target="story-list-screen">‚Üê ‡§µ‡§æ‡§™‡§∏ ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§™‡§∞</button>
                <div class="story-header">
                    <h2 id="story-title"></h2>
                    <p id="story-author"></p>
                </div>
                <div id="story-controls">
                     <button id="favorite-btn" title="‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç">‚ù§Ô∏è</button>
                     <audio id="audio-player" controls></audio>
                </div>
                <p id="story-content"></p>
            </div>

            <!-- ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="favorites-screen" class="screen">
                <button class="btn back-btn" data-target="home-screen">‚Üê ‡§µ‡§æ‡§™‡§∏ ‡§π‡•ã‡§Æ ‡§™‡§∞</button>
                <h2 class="section-title">‡§Æ‡•á‡§∞‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å</h2>
                <div id="favorites-grid" class="grid-container">
                    <!-- ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å ‡§Ø‡§π‡§æ‡§Å ‡§Ü‡§è‡§Ç‡§ó‡•Ä -->
                </div>
            </div>

             <!-- ‡§ñ‡•ã‡§ú ‡§ï‡•á ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ï‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® -->
            <div id="search-results-screen" class="screen">
                <button class="btn back-btn" data-target="home-screen">‚Üê ‡§µ‡§æ‡§™‡§∏ ‡§π‡•ã‡§Æ ‡§™‡§∞</button>
                <h2 id="search-title" class="section-title">‡§ñ‡•ã‡§ú ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</h2>
                <div id="search-results-grid" class="grid-container">
                    <!-- ‡§ñ‡•ã‡§ú ‡§ï‡•á ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§Ø‡§π‡§æ‡§Å ‡§Ü‡§è‡§Ç‡§ó‡•á -->
                </div>
            </div>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§® ---
            const storiesDB = [
                { id: 1, title: '‡§™‡•ç‡§Ø‡§æ‡§∏‡§æ ‡§ï‡•å‡§Ü', author: '‡§à‡§∏‡§™', category: '‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•Ä ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å', content: '‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§è‡§ï ‡§ï‡•å‡§Ü ‡§¨‡§π‡•Å‡§§ ‡§™‡•ç‡§Ø‡§æ‡§∏‡§æ ‡§•‡§æ‡•§ ‡§µ‡§π ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§§‡§≤‡§æ‡§∂ ‡§Æ‡•á‡§Ç ‡§á‡§ß‡§∞-‡§â‡§ß‡§∞ ‡§â‡§°‡§º ‡§∞‡§π‡§æ ‡§•‡§æ‡•§\n\n‡§â‡§∏‡•á ‡§è‡§ï ‡§ò‡§°‡§º‡§æ ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡§ø‡§Ø‡§æ‡•§ ‡§ú‡§¨ ‡§â‡§∏‡§®‡•á ‡§ò‡§°‡§º‡•á ‡§Æ‡•á‡§Ç ‡§ù‡§æ‡§Å‡§ï‡§æ, ‡§§‡•ã ‡§™‡§æ‡§®‡•Ä ‡§¨‡§π‡•Å‡§§ ‡§®‡•Ä‡§ö‡•á ‡§•‡§æ‡•§ ‡§â‡§∏‡§ï‡•Ä ‡§ö‡•ã‡§Ç‡§ö ‡§™‡§æ‡§®‡•Ä ‡§§‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§™‡§π‡•Å‡§Å‡§ö ‡§™‡§æ ‡§∞‡§π‡•Ä ‡§•‡•Ä‡•§\n\n‡§§‡§≠‡•Ä ‡§â‡§∏‡•á ‡§è‡§ï ‡§â‡§™‡§æ‡§Ø ‡§∏‡•Ç‡§ù‡§æ‡•§ ‡§â‡§∏‡§®‡•á ‡§™‡§æ‡§∏ ‡§™‡§°‡§º‡•á ‡§ï‡§Ç‡§ï‡§°‡§º ‡§è‡§ï-‡§è‡§ï ‡§ï‡§∞‡§ï‡•á ‡§ò‡§°‡§º‡•á ‡§Æ‡•á‡§Ç ‡§°‡§æ‡§≤‡§®‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞ ‡§¶‡§ø‡§è‡•§ ‡§ß‡•Ä‡§∞‡•á-‡§ß‡•Ä‡§∞‡•á ‡§™‡§æ‡§®‡•Ä ‡§ä‡§™‡§∞ ‡§Ü ‡§ó‡§Ø‡§æ‡•§ ‡§ï‡•å‡§µ‡•á ‡§®‡•á ‡§™‡§æ‡§®‡•Ä ‡§™‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§™‡•ç‡§Ø‡§æ‡§∏ ‡§¨‡•Å‡§ù‡§æ‡§à‡•§\n\n‡§∏‡•Ä‡§ñ: ‡§ú‡§π‡§æ‡§Å ‡§ö‡§æ‡§π, ‡§µ‡§π‡§æ‡§Å ‡§∞‡§æ‡§π‡•§', audioSrc: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3' },
                { id: 2, title: '‡§∂‡•á‡§∞ ‡§î‡§∞ ‡§ö‡•Ç‡§π‡§æ', author: '‡§µ‡§ø‡§∑‡•ç‡§£‡•Å ‡§∂‡§∞‡•ç‡§Æ‡§æ', category: '‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•Ä ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å', content: '‡§è‡§ï ‡§ú‡§Ç‡§ó‡§≤ ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§∂‡•á‡§∞ ‡§∏‡•ã ‡§∞‡§π‡§æ ‡§•‡§æ‡•§ ‡§è‡§ï ‡§ö‡•Ç‡§π‡§æ ‡§Ü‡§Ø‡§æ ‡§î‡§∞ ‡§â‡§∏‡§ï‡•á ‡§ä‡§™‡§∞ ‡§ï‡•Ç‡§¶‡§®‡•á ‡§≤‡§ó‡§æ‡•§ ‡§∂‡•á‡§∞ ‡§ï‡•Ä ‡§®‡•Ä‡§Ç‡§¶ ‡§ñ‡•Å‡§≤ ‡§ó‡§à ‡§î‡§∞ ‡§â‡§∏‡§®‡•á ‡§ö‡•Ç‡§π‡•á ‡§ï‡•ã ‡§™‡§ï‡§°‡§º ‡§≤‡§ø‡§Ø‡§æ‡•§\n\n‡§ö‡•Ç‡§π‡•á ‡§®‡•á ‡§ó‡§ø‡§°‡§º‡§ó‡§ø‡§°‡§º‡§æ‡§§‡•á ‡§π‡•Å‡§è ‡§ï‡§π‡§æ, "‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú, ‡§Æ‡•Å‡§ù‡•á ‡§õ‡•ã‡§°‡§º ‡§¶‡•á‡§Ç‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§ï‡§æ‡§Æ ‡§Ü ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å‡•§" ‡§∂‡•á‡§∞ ‡§π‡§Å‡§∏‡§æ ‡§î‡§∞ ‡§â‡§∏‡•á ‡§ú‡§æ‡§®‡•á ‡§¶‡§ø‡§Ø‡§æ‡•§\n\n‡§ï‡•Å‡§õ ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§¨‡§æ‡§¶, ‡§∂‡•á‡§∞ ‡§è‡§ï ‡§∂‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§ú‡§æ‡§≤ ‡§Æ‡•á‡§Ç ‡§´‡§Å‡§∏ ‡§ó‡§Ø‡§æ‡•§ ‡§µ‡§π ‡§ú‡§º‡•ã‡§∞-‡§ú‡§º‡•ã‡§∞ ‡§∏‡•á ‡§¶‡§π‡§æ‡§°‡§º‡§®‡•á ‡§≤‡§ó‡§æ‡•§ ‡§ö‡•Ç‡§π‡•á ‡§®‡•á ‡§â‡§∏‡§ï‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§®‡•Ä ‡§î‡§∞ ‡§µ‡§π‡§æ‡§Å ‡§™‡§π‡•Å‡§Å‡§ö ‡§ó‡§Ø‡§æ‡•§ ‡§â‡§∏‡§®‡•á ‡§Ö‡§™‡§®‡•á ‡§§‡•á‡§ú‡§º ‡§¶‡§æ‡§Å‡§§‡•ã‡§Ç ‡§∏‡•á ‡§ú‡§æ‡§≤ ‡§ï‡§æ‡§ü ‡§¶‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§∂‡•á‡§∞ ‡§ï‡•ã ‡§Ü‡§ú‡§º‡§æ‡§¶ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ‡•§\n\n‡§∏‡•Ä‡§ñ: ‡§ï‡§≠‡•Ä ‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•ã ‡§õ‡•ã‡§ü‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§∏‡§Æ‡§ù‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§', audioSrc: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3' },
                { id: 3, title: '‡§Ö‡§ú‡§®‡§¨‡•Ä ‡§∏‡§æ‡§Ø‡§æ', author: '‡§µ‡§ø‡§ï‡•ç‡§∞‡§Æ ‡§Ö‡§∞‡•ã‡§°‡§º‡§æ', category: '‡§π‡•â‡§∞‡§∞', content: '‡§Ö‡§Æ‡§æ‡§µ‡§∏ ‡§ï‡•Ä ‡§∞‡§æ‡§§ ‡§•‡•Ä‡•§ ‡§∞‡•ã‡§π‡§ø‡§§ ‡§Ö‡§™‡§®‡•Ä ‡§ï‡§æ‡§∞ ‡§∏‡•á ‡§è‡§ï ‡§∏‡•Å‡§®‡§∏‡§æ‡§® ‡§∏‡§°‡§º‡§ï ‡§∏‡•á ‡§ó‡•Å‡§ú‡§º‡§∞ ‡§∞‡§π‡§æ ‡§•‡§æ‡•§ ‡§Ö‡§ö‡§æ‡§®‡§ï ‡§â‡§∏‡§ï‡•Ä ‡§ï‡§æ‡§∞ ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ó‡§à‡•§ ‡§â‡§∏‡§®‡•á ‡§¨‡§æ‡§π‡§∞ ‡§®‡§ø‡§ï‡§≤‡§ï‡§∞ ‡§¶‡•á‡§ñ‡§æ, ‡§™‡§∞ ‡§ï‡•Å‡§õ ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§Ø‡§æ‡•§\n\n‡§¶‡•Ç‡§∞ ‡§â‡§∏‡•á ‡§è‡§ï ‡§™‡§∞‡§õ‡§æ‡§à ‡§¶‡§ø‡§ñ‡•Ä ‡§ú‡•ã ‡§â‡§∏‡§ï‡•Ä ‡§§‡§∞‡§´ ‡§¨‡§¢‡§º ‡§∞‡§π‡•Ä ‡§•‡•Ä‡•§ ‡§ú‡•à‡§∏‡•á-‡§ú‡•à‡§∏‡•á ‡§µ‡•ã ‡§™‡§æ‡§∏ ‡§Ü‡§§‡•Ä ‡§ó‡§à, ‡§∞‡•ã‡§π‡§ø‡§§ ‡§ï‡§æ ‡§¶‡§ø‡§≤ ‡§ú‡§º‡•ã‡§∞-‡§ú‡§º‡•ã‡§∞ ‡§∏‡•á ‡§ß‡§°‡§º‡§ï‡§®‡•á ‡§≤‡§ó‡§æ‡•§ ‡§µ‡•ã ‡§ï‡•ã‡§à ‡§á‡§Ç‡§∏‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§≤‡§ó ‡§∞‡§π‡§æ ‡§•‡§æ‡•§ ‡§â‡§∏‡§ï‡•Ä ‡§Ü‡§Å‡§ñ‡•á‡§Ç ‡§Ö‡§Ç‡§ß‡•á‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ö‡§Æ‡§ï ‡§∞‡§π‡•Ä ‡§•‡•Ä‡§Ç‡•§\n\n‡§∞‡•ã‡§π‡§ø‡§§ ‡§°‡§∞ ‡§ï‡•á ‡§Æ‡§æ‡§∞‡•á ‡§µ‡§æ‡§™‡§∏ ‡§ï‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§¨‡•à‡§† ‡§ó‡§Ø‡§æ ‡§î‡§∞ ‡§¶‡§∞‡§µ‡§æ‡§ú‡§º‡•á ‡§≤‡•â‡§ï ‡§ï‡§∞ ‡§≤‡§ø‡§è‡•§ ‡§∏‡§æ‡§Ø‡§æ ‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§Ü‡§ï‡§∞ ‡§∞‡•Å‡§ï ‡§ó‡§Ø‡§æ ‡§î‡§∞ ‡§∂‡•Ä‡§∂‡•á ‡§™‡§∞ ‡§ñ‡§∞‡•ã‡§Ç‡§ö‡§®‡•á ‡§≤‡§ó‡§æ‡•§', audioSrc: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3' },
                { id: 4, title: '‡§™‡§π‡§≤‡•Ä ‡§Æ‡•Å‡§≤‡§æ‡§ï‡§æ‡§§', author: '‡§™‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∏‡§ø‡§Ç‡§π', category: '‡§∞‡•ã‡§Æ‡§æ‡§Ç‡§∏', content: '‡§∞‡§ø‡§Ø‡§æ ‡§è‡§ï ‡§ï‡•à‡§´‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡•Ä ‡§ï‡•â‡§´‡§º‡•Ä ‡§ï‡§æ ‡§á‡§Ç‡§§‡§ú‡§º‡§æ‡§∞ ‡§ï‡§∞ ‡§∞‡§π‡•Ä ‡§•‡•Ä‡•§ ‡§§‡§≠‡•Ä ‡§è‡§ï ‡§≤‡§°‡§º‡§ï‡§æ ‡§ó‡§≤‡§§‡•Ä ‡§∏‡•á ‡§â‡§∏‡§∏‡•á ‡§ü‡§ï‡§∞‡§æ ‡§ó‡§Ø‡§æ ‡§î‡§∞ ‡§â‡§∏‡§ï‡•Ä ‡§ï‡•â‡§´‡§º‡•Ä ‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•Ä ‡§°‡•ç‡§∞‡•á‡§∏ ‡§™‡§∞ ‡§ó‡§ø‡§∞ ‡§ó‡§à‡•§\n\n"‡§ì‡§π! ‡§Æ‡•à‡§Ç ‡§¨‡§π‡•Å‡§§ ‡§∂‡§∞‡•ç‡§Æ‡§ø‡§Ç‡§¶‡§æ ‡§π‡•Ç‡§Å," ‡§≤‡§°‡§º‡§ï‡•á ‡§®‡•á ‡§ï‡§π‡§æ, ‡§ú‡§ø‡§∏‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ï‡§∞‡§£ ‡§•‡§æ‡•§ ‡§∞‡§ø‡§Ø‡§æ ‡§•‡•ã‡§°‡§º‡•Ä ‡§®‡§æ‡§∞‡§æ‡§ú‡§º ‡§•‡•Ä, ‡§™‡§∞ ‡§ï‡§∞‡§£ ‡§ï‡•Ä ‡§Æ‡§æ‡§∏‡•Ç‡§Æ‡§ø‡§Ø‡§§ ‡§¶‡•á‡§ñ‡§ï‡§∞ ‡§Æ‡•Å‡§∏‡•ç‡§ï‡•Å‡§∞‡§æ ‡§¶‡•Ä‡•§\n\n‡§ï‡§∞‡§£ ‡§®‡•á ‡§â‡§∏‡•á ‡§è‡§ï ‡§®‡§à ‡§°‡•ç‡§∞‡•á‡§∏ ‡§ñ‡§∞‡•Ä‡§¶‡§®‡•á ‡§ï‡•Ä ‡§™‡•á‡§∂‡§ï‡§∂ ‡§ï‡•Ä‡•§ ‡§Ø‡§π‡•Ä‡§Ç ‡§∏‡•á ‡§â‡§®‡§ï‡•Ä ‡§¨‡§æ‡§§‡§ö‡•Ä‡§§ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•Å‡§à ‡§î‡§∞ ‡§Ø‡•á ‡§â‡§®‡§ï‡•Ä ‡§™‡§π‡§≤‡•Ä ‡§Æ‡•Å‡§≤‡§æ‡§ï‡§æ‡§§, ‡§è‡§ï ‡§ñ‡•Ç‡§¨‡§∏‡•Ç‡§∞‡§§ ‡§∞‡§ø‡§∂‡•ç‡§§‡•á ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§¨‡§® ‡§ó‡§à‡•§', audioSrc: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3' },
                { id: 5, title: '‡§Ö‡§Ç‡§§‡§∞‡§ø‡§ï‡•ç‡§∑ ‡§ï‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ', author: '‡§°‡•â. ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®', category: '‡§´‡§ø‡§ï‡•ç‡§∂‡§®', content: '‡§µ‡§∞‡•ç‡§∑ 2077‡•§ ‡§ï‡•à‡§™‡•ç‡§ü‡§® ‡§Ü‡§∞‡§µ ‡§Ö‡§™‡§®‡•á ‡§Ø‡§æ‡§® '‡§∏‡•ç‡§ü‡§æ‡§∞‡§ó‡•á‡§ú‡§º‡§∞' ‡§Æ‡•á‡§Ç ‡§Æ‡§Ç‡§ó‡§≤ ‡§ó‡•ç‡§∞‡§π ‡§ï‡•Ä ‡§ì‡§∞ ‡§¨‡§¢‡§º ‡§∞‡§π‡•á ‡§•‡•á‡•§ ‡§Ø‡§π ‡§Æ‡§æ‡§®‡§µ ‡§ú‡§æ‡§§‡§ø ‡§ï‡§æ ‡§Æ‡§Ç‡§ó‡§≤ ‡§™‡§∞ ‡§™‡§π‡§≤‡§æ ‡§Æ‡§æ‡§®‡§µ ‡§Æ‡§ø‡§∂‡§® ‡§•‡§æ‡•§\n\n‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§®, ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§è‡§ï ‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤ ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§Ø‡§π ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤ ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§ú‡•ç‡§û‡§æ‡§§ ‡§∏‡§≠‡•ç‡§Ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§•‡§æ‡•§ ‡§Ü‡§∞‡§µ ‡§®‡•á ‡§Ö‡§™‡§®‡•Ä ‡§ü‡•Ä‡§Æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤ ‡§ï‡•á ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§®‡•á ‡§ï‡§æ ‡§´‡•à‡§∏‡§≤‡§æ ‡§ï‡§ø‡§Ø‡§æ‡•§\n\n‡§µ‡•á ‡§è‡§ï ‡§ê‡§∏‡•á ‡§ó‡•ç‡§∞‡§π ‡§™‡§∞ ‡§™‡§π‡•Å‡§Å‡§ö‡•á ‡§ú‡•ã ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π ‡§∏‡•á ‡§ï‡•ç‡§∞‡§ø‡§∏‡•ç‡§ü‡§≤ ‡§ï‡§æ ‡§¨‡§®‡§æ ‡§•‡§æ‡•§ ‡§µ‡§π‡§æ‡§Å ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∞‡§π‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§™‡•ç‡§∞‡§æ‡§£‡•Ä ‡§Æ‡§ø‡§≤‡•á, ‡§ú‡§ø‡§®‡•ç‡§π‡•ã‡§Ç‡§®‡•á ‡§Ü‡§∞‡§µ ‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§ï‡§ø‡§Ø‡§æ‡•§ ‡§Ø‡§π ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§®‡§µ‡§§‡§æ ‡§ï‡•Ä ‡§™‡§π‡§≤‡•Ä ‡§è‡§≤‡§ø‡§Ø‡§® ‡§Æ‡•Å‡§≤‡§æ‡§ï‡§æ‡§§ ‡§•‡•Ä‡•§', audioSrc: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3' },
                { id: 6, title: '‡§ö‡§æ‡§∞‡•ç‡§≤‡•ç‡§∏ ‡§°‡§æ‡§∞‡•ç‡§µ‡§ø‡§® ‡§ï‡§æ ‡§∏‡§´‡§∞', author: '‡§ú‡•ç‡§û‡§æ‡§® ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂', category: '‡§®‡•â‡§®-‡§´‡§ø‡§ï‡•ç‡§∂‡§®', content: '‡§ö‡§æ‡§∞‡•ç‡§≤‡•ç‡§∏ ‡§°‡§æ‡§∞‡•ç‡§µ‡§ø‡§® ‡§è‡§ï ‡§¨‡•ç‡§∞‡§ø‡§ü‡§ø‡§∂ ‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø‡§µ‡§æ‡§¶‡•Ä ‡§•‡•á‡•§ 1831 ‡§Æ‡•á‡§Ç, ‡§µ‡•á ‡§è‡§ö‡§è‡§Æ‡§è‡§∏ ‡§¨‡•Ä‡§ó‡§≤ ‡§®‡§æ‡§Æ‡§ï ‡§ú‡§π‡§æ‡§ú ‡§™‡§∞ ‡§™‡§æ‡§Å‡§ö ‡§∏‡§æ‡§≤ ‡§ï‡•Ä ‡§≤‡§Ç‡§¨‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§™‡§∞ ‡§®‡§ø‡§ï‡§≤‡•á‡•§\n\n‡§á‡§∏ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§®, ‡§â‡§®‡•ç‡§π‡•ã‡§Ç‡§®‡•á ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§Æ‡§π‡§æ‡§¶‡•ç‡§µ‡•Ä‡§™‡•ã‡§Ç ‡§î‡§∞ ‡§¶‡•ç‡§µ‡•Ä‡§™‡•ã‡§Ç ‡§™‡§∞ ‡§™‡•å‡§ß‡•ã‡§Ç, ‡§ú‡§æ‡§®‡§µ‡§∞‡•ã‡§Ç ‡§î‡§∞ ‡§ú‡•Ä‡§µ‡§æ‡§∂‡•ç‡§Æ‡•ã‡§Ç ‡§ï‡§æ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§ï‡§ø‡§Ø‡§æ‡•§ ‡§ó‡•à‡§≤‡§æ‡§™‡§æ‡§ó‡•ã‡§∏ ‡§¶‡•ç‡§µ‡•Ä‡§™ ‡§∏‡§Æ‡•Ç‡§π ‡§™‡§∞, ‡§â‡§®‡•ç‡§π‡•ã‡§Ç‡§®‡•á ‡§´‡§ø‡§®‡•ç‡§ö‡•á‡§∏ (‡§ö‡§ø‡§°‡§º‡§ø‡§Ø‡•ã‡§Ç) ‡§ï‡•Ä ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§ú‡§æ‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§¶‡•á‡§ñ‡§æ, ‡§ú‡§ø‡§®‡§ï‡•Ä ‡§ö‡•ã‡§Ç‡§ö ‡§Ö‡§≤‡§ó-‡§Ö‡§≤‡§ó ‡§¶‡•ç‡§µ‡•Ä‡§™‡•ã‡§Ç ‡§™‡§∞ ‡§Ö‡§≤‡§ó-‡§Ö‡§≤‡§ó ‡§•‡•Ä‡§Ç‡•§\n\n‡§á‡§® ‡§Ö‡§µ‡§≤‡•ã‡§ï‡§®‡•ã‡§Ç ‡§®‡•á ‡§â‡§®‡•ç‡§π‡•á‡§Ç '‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§ö‡§Ø‡§®' (Natural Selection) ‡§ï‡•á ‡§∏‡§ø‡§¶‡•ç‡§ß‡§æ‡§Ç‡§§ ‡§ï‡•ã ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡•á‡§∞‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ, ‡§ú‡•ã ‡§â‡§®‡§ï‡•á ‡§™‡•ç‡§∞‡§∏‡§ø‡§¶‡•ç‡§ß ‡§ï‡§æ‡§Æ "‡§ë‡§® ‡§¶ ‡§ì‡§∞‡§ø‡§ú‡§ø‡§® ‡§ë‡§´ ‡§∏‡•ç‡§™‡•Ä‡§∂‡•Ä‡§ú‡§º" ‡§ï‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§¨‡§®‡§æ‡•§', audioSrc: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3' },
            ];

            // --- DOM ‡§è‡§≤‡§ø‡§Æ‡•á‡§Ç‡§ü‡•ç‡§∏ ---
            const loginScreen = document.getElementById('login-screen');
            const mainApp = document.getElementById('main-app');
            const loginForm = document.getElementById('login-form');
            
            const screens = document.querySelectorAll('.screen');
            const appTitle = document.getElementById('app-title');
            
            const categoryGrid = document.getElementById('category-grid');
            const storyListGrid = document.getElementById('story-list-grid');
            const listTitle = document.getElementById('list-title');
            
            const storyTitle = document.getElementById('story-title');
            const storyAuthor = document.getElementById('story-author');
            const storyContent = document.getElementById('story-content');
            const audioPlayer = document.getElementById('audio-player');
            const favoriteBtn = document.getElementById('favorite-btn');
            
            const favoritesIcon = document.getElementById('favorites-icon');
            const favoritesGrid = document.getElementById('favorites-grid');
            
            const searchBar = document.getElementById('search-bar');
            const searchResultsGrid = document.getElementById('search-results-grid');
            const searchTitle = document.getElementById('search-title');
            

            // --- ‡§ê‡§™ ‡§∏‡•ç‡§ü‡•á‡§ü ---
            let currentUser = null;
            let currentFavorites = [];
            let currentScreen = 'home-screen'; // ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§°‡§ø‡§ü‡•á‡§≤ ‡§∏‡•á ‡§µ‡§æ‡§™‡§∏ ‡§Ü‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è
            let previousScreen = 'home-screen';


            // --- ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®‡•ç‡§∏ ---

            // ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¨‡§¶‡§≤‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function showScreen(screenId) {
                screens.forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenId).classList.add('active');
                currentScreen = screenId;
                window.scrollTo(0, 0); // ‡§π‡§∞ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ö‡•á‡§Ç‡§ú ‡§™‡§∞ ‡§ü‡•â‡§™ ‡§™‡§∞ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç
            }

            // ‡§≤‡•â‡§ó‡§ø‡§® ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function handleLogin(e) {
                e.preventDefault();
                const username = document.getElementById('username').value;
                if(username.trim() === '') {
                    alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§Ø‡•Ç‡§ú‡§º‡§∞‡§®‡•á‡§Æ ‡§°‡§æ‡§≤‡•á‡§Ç‡•§');
                    return;
                }
                currentUser = { name: username };
                loginScreen.style.display = 'none';
                mainApp.style.display = 'block';
                loadFavorites(); // ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç
                initializeApp();
            }

            // ‡§ê‡§™ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function initializeApp() {
                showScreen('home-screen');
                renderCategories();
            }

            // ‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä‡§ú‡§º ‡§ï‡•ã ‡§π‡•ã‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function renderCategories() {
                const categories = [...new Set(storiesDB.map(story => story.category))];
                categoryGrid.innerHTML = '';
                categories.forEach(category => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.dataset.category = category;
                    card.innerHTML = `
                        <div class="card-content">
                            <h3>${category}</h3>
                            <p>${storiesDB.filter(s => s.category === category).length} ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å</p>
                        </div>
                    `;
                    card.addEventListener('click', () => showStoryList(category));
                    categoryGrid.appendChild(card);
                });
            }

            // ‡§ï‡§ø‡§∏‡•Ä ‡§è‡§ï ‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä ‡§ï‡•Ä ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function showStoryList(category) {
                previousScreen = 'home-screen';
                listTitle.textContent = category;
                const stories = storiesDB.filter(story => story.category === category);
                renderStoryGrid(storyListGrid, stories);
                showScreen('story-list-screen');
            }
            
            // ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§°‡§ø‡§ü‡•á‡§≤ ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function showStoryDetail(storyId) {
                 // ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§π‡§Æ ‡§ï‡§π‡§æ‡§Å ‡§∏‡•á ‡§Ü‡§è ‡§π‡•à‡§Ç
                if (currentScreen !== 'story-detail-screen') {
                    previousScreen = currentScreen;
                }
                
                const story = storiesDB.find(s => s.id === storyId);
                if (!story) return;

                storyTitle.textContent = story.title;
                storyAuthor.textContent = `‡§≤‡•á‡§ñ‡§ï: ${story.author}`;
                storyContent.textContent = story.content;
                audioPlayer.src = story.audioSrc;
                favoriteBtn.dataset.storyId = story.id;

                updateFavoriteButton(story.id);
                showScreen('story-detail-screen');
            }

            // ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function updateFavoriteButton(storyId) {
                if (currentFavorites.includes(storyId)) {
                    favoriteBtn.classList.add('favorited');
                    favoriteBtn.title = "‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§∏‡•á ‡§π‡§ü‡§æ‡§è‡§Å";
                } else {
                    favoriteBtn.classList.remove('favorited');
                    favoriteBtn.title = "‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç";
                }
            }
            
            // ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ü‡•â‡§ó‡§≤ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function toggleFavorite() {
                const storyId = parseInt(favoriteBtn.dataset.storyId);
                const index = currentFavorites.indexOf(storyId);
                if (index > -1) {
                    currentFavorites.splice(index, 1); // ‡§π‡§ü‡§æ‡§è‡§Å
                } else {
                    currentFavorites.push(storyId); // ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
              }
              
                updateFavoriteButton(storyId);
                saveFavorites(); // localStorage ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
            }
            
            // ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã localStorage ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function saveFavorites() {
                localStorage.setItem(`favorites_${currentUser.name}`, JSON.stringify(currentFavorites));
            }
            
            // localStorage ‡§∏‡•á ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function loadFavorites() {
                const saved = localStorage.getItem(`favorites_${currentUser.name}`);
                if (saved) {
                    currentFavorites = JSON.parse(saved);
                } else {
                    currentFavorites = [];
                }
            }

            // ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function showFavorites() {
                previousScreen = 'home-screen';
                const favoriteStories = storiesDB.filter(story => currentFavorites.includes(story.id));
                favoritesGrid.innerHTML = '';
                if(favoriteStories.length > 0){
                    renderStoryGrid(favoritesGrid, favoriteStories);
                } else {
                    favoritesGrid.innerHTML = '<p>‡§Ü‡§™‡§®‡•á ‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§ï‡§π‡§æ‡§®‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§ú‡•ã‡§°‡§º‡•Ä ‡§π‡•à‡•§</p>';
                }
                showScreen('favorites-screen');
            }
            
            // ‡§ñ‡•ã‡§ú ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function handleSearch() {
                const query = searchBar.value.toLowerCase().trim();
                if (query.length < 2) {
                    // ‡§Ö‡§ó‡§∞ ‡§ñ‡•ã‡§ú ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à, ‡§§‡•ã ‡§π‡•ã‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å
                    if(currentScreen === 'search-results-screen'){
                       showScreen('home-screen');
                    }
                    return;
                }
                
                const results = storiesDB.filter(story => 
                    story.title.toLowerCase().includes(query) || 
                    story.author.toLowerCase().includes(query)
                );
                
                searchTitle.textContent = `'${query}' ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ñ‡•ã‡§ú ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ`;
                searchResultsGrid.innerHTML = '';
                if(results.length > 0){
                   renderStoryGrid(searchResultsGrid, results);
                } else {
                    searchResultsGrid.innerHTML = `<p>‡§ï‡•ã‡§à ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§</p>`;
                }
                showScreen('search-results-screen');
            }


            // ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§ó‡•ç‡§∞‡§ø‡§° ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡§æ ‡§ï‡•â‡§Æ‡§® ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
            function renderStoryGrid(gridElement, stories) {
                gridElement.innerHTML = '';
                stories.forEach(story => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.dataset.storyId = story.id;
                    card.innerHTML = `
                        <div class="card-content">
                            <h3>${story.title}</h3>
                            <p>${story.author}</p>
                        </div>
                    `;
                    card.addEventListener('click', () => showStoryDetail(story.id));
                    gridElement.appendChild(card);
                });
            }


            // --- ‡§á‡§µ‡•á‡§Ç‡§ü ‡§≤‡§ø‡§∏‡•ç‡§ü‡§®‡§∞‡•ç‡§∏ ---
            loginForm.addEventListener('submit', handleLogin);
            
            appTitle.addEventListener('click', () => showScreen('home-screen'));

            document.querySelectorAll('.back-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // ‡§™‡§π‡§≤‡•á previousScreen ‡§ï‡•ã ‡§ü‡§æ‡§∞‡§ó‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç, ‡§Ö‡§ó‡§∞ ‡§® ‡§Æ‡§ø‡§≤‡•á ‡§§‡•ã data-target ‡§ï‡•ã
                    const target = (previousScreen && document.getElementById(previousScreen)) ? previousScreen : btn.dataset.target;
                    showScreen(target);
                });
            });

            favoriteBtn.addEventListener('click', toggleFavorite);
            favoritesIcon.addEventListener('click', showFavorites);
            searchBar.addEventListener('input', handleSearch);

        });
    </script>
</body>
</html>
